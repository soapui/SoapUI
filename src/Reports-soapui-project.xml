<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project activeEnvironment="Default" name="Reports" soapui-version="4.5.2" resourceRoot="" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="Reports" type="rest" basePath="" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://${#Global#Servicehost}:${#Global#Serviceport} </con:endpoint></con:endpoints><con:resource name="/vms/rest/reports" path="/vms/rest/reports"><con:settings/><con:parameters/><con:method name="GET Reports" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>text/html</con:mediaType><con:status>401</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:rep="http://zvss2/vms/rest/reports">rep:Response</con:element></con:representation><con:request name="Request 1" mediaType="application/xml"><con:settings/><con:endpoint>http://${</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="Reports/id" type="rest" basePath="" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache/><con:endpoints><con:endpoint>http://${</con:endpoint></con:endpoints><con:resource name="/reports/id" path="/reports/{id}"><con:settings/><con:parameters><con:parameter><con:name>id</con:name><con:value>${#Project#CorporateId} </con:value><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>${#Project#CorporateId} </con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="GET Reports/id" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="VMSUserId" value="${#Project#VMSUserId}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${</con:endpoint><con:request/><con:credentials><con:username>${#Project#Username} </con:username><con:password>${#Project#Password} </con:password><con:domain>${#Project#Domain} </con:domain><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:testSuite name="Reports TestSuite"><con:description>TestSuite generated for REST Service [Reports]</con:description><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Init" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script"><con:settings/><con:config><script>import groovy.sql.*
import com.eviware.soapui.impl.wsdl.WsdlInterface
import com.eviware.soapui.SoapUI.*
import com.eviware.soapui.support.GroovyUtils
import com.eviware.soapui.model.*
import com.eviware.soapui.support.scripting.*
import com.eviware.soapui.model.project.*

// MVTC
//def sql = groovy.sql.Sql.newInstance("jdbc:oracle:thin:@//ts2msvsvdb-scan:1521:DP8A", "vms_core_o", "vms", 'oracle.jdbc.driver.OracleDriver')
// 3S
def ProjectName = testRunner.testCase.testSuite.project.name
def Admin = 3
def userRole = '${Admin}'
def sql = groovy.sql.Sql.newInstance("jdbc:oracle:thin:@zvss2:1521:DP9A", "dpownera", "dpownera", 'oracle.jdbc.driver.OracleDriver')
def testCase = testRunner.testCase
def testSuite = testRunner.testCase.testSuite
def testproject = testRunner.testCase.testSuite.project
def VmsuserId_user = sql.firstRow("select vmsuserid from (select vmsuserid from customer cu, corporate co where cu.corporate_id=co.corporate_id ORDER BY dbms_random.value) where rownum &lt;= 1")
def CorporateId = sql.firstRow("select corporate_id from customer c where c.vmsuserid=${VmsuserId_user.vmsuserid}")
def CustomerId = sql.firstRow("select customer_id from customer c where c.vmsuserid=${VmsuserId_user.vmsuserid}")
def Msisdn = sql.firstRow("select msisdn from subscriber s where s.customer_id=${CustomerId.customer_id}")
def CorporateName = sql.firstRow("select name from corporate c where c.corporate_id=${CorporateId.Corporate_id}")
//def VmsuserId_admin = sql.firstRow ("select c.vmsuserid from customer c, userrole_customer uc where c.customer_id=uc.customer_id and uc.userrole_id=${UserRole} and c.corporate_id=${CorporateId.corporate_id} and ROWNUM&lt;=1")

//testproject.setPropertyValue("VmsuserId","${VmsuserId_admin.vmsuserid}");
testproject.setPropertyValue("VmsuserId_user","${VmsuserId_user.vmsuserid}");
testproject.setPropertyValue("CustomerId","${CustomerId.customer_id}");
testproject.setPropertyValue("Msisdn","${Msisdn.msisdn}");
testproject.setPropertyValue("CorporateId","${CorporateId.corporate_id}");
testproject.setPropertyValue("CorporateName","${CorporateName.name}");

// Log output
log.info "############### ProjectName=${ProjectName} ##################"
//log.info VmsuserId
log.info VmsuserId_user
log.info CustomerId
log.info Msisdn
log.info CorporateId
log.info CorporateName
//log.info VmsuserId_admin</script></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="/vms/rest/reports TestCase" searchProperties="true"><con:description>TestCase generated for REST Resource [/vms/rest/reports] located at [/vms/rest/reports]</con:description><con:settings/><con:testStep type="restrequest" name="Request 1"><con:settings/><con:config service="Reports" resourcePath="/vms/rest/reports" methodName="GET Reports" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Request 1" mediaType="application/xml" accept=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="HTTP_VMS_USER_ID" value="${#Project#VmsuserId_admin}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Global#Servicehost}:${#Global#Serviceport} </con:endpoint><con:request/><con:assertion type="XPath Match" name="Check for existance of [otpLicencesTotal]"><con:configuration><path>declare namespace ns1='http://zvss2/vms/rest/reports';
exists( //ns1:Response/ns1:result/ns1:otpLicencesTotal)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Check for existance of [services]"><con:configuration><path>declare namespace ns1='http://zvss2/vms/rest/reports';
exists( //ns1:Response/ns1:result/ns1:services)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>${#Project#Username}</con:username><con:password>${#Project#Password}</con:password><con:domain>${#Project#Domain}</con:domain><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite name="Reports/id TestSuite"><con:description>TestSuite generated for REST Service [Reports/id]</con:description><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="/reports/id TestCase" searchProperties="true"><con:description>TestCase generated for REST Resource [/reports/id] located at [/reports/{id}]</con:description><con:settings/><con:testStep type="restrequest" name="Request 1"><con:settings/><con:config service="Reports/id" resourcePath="/reports/{id}" methodName="GET Reports/id" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Request 1" mediaType="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="VMSUserId" value="${#Project#VMSUserId}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${</con:endpoint><con:request/><con:credentials><con:username>${#Project#Username} </con:username><con:password>${#Project#Password} </con:password><con:domain>${#Project#Domain} </con:domain><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:requirements/><con:properties><con:property><con:name>Host</con:name><con:value>zvss2</con:value></con:property><con:property><con:name>Port</con:name><con:value>8080</con:value></con:property><con:property><con:name>MinPINLen</con:name><con:value>4</con:value></con:property><con:property><con:name>MinPUKLen</con:name><con:value>8</con:value></con:property><con:property><con:name>PINRetryCnt</con:name><con:value>3</con:value></con:property><con:property><con:name>PUKRetryCnt</con:name><con:value>3</con:value></con:property><con:property><con:name>OTPDefaultLen</con:name><con:value>6</con:value></con:property><con:property><con:name>Bans</con:name><con:value>12345678</con:value></con:property><con:property><con:name>Search</con:name><con:value>Corp </con:value></con:property><con:property><con:name>Start</con:name><con:value>0</con:value></con:property><con:property><con:name>Limit</con:name><con:value>100</con:value></con:property><con:property><con:name>Sort</con:name><con:value>date</con:value></con:property><con:property><con:name>Direction</con:name><con:value>ASC</con:value></con:property><con:property><con:name>Username</con:name><con:value>vmsmu</con:value></con:property><con:property><con:name>Password</con:name><con:value>secunet2012</con:value></con:property><con:property><con:name>Domain</con:name><con:value>VMSCore</con:value></con:property><con:property><con:name>Type</con:name><con:value>csv</con:value></con:property><con:property><con:name>Disposition</con:name><con:value>foobar.csv</con:value></con:property><con:property><con:name>Replace</con:name><con:value>replace</con:value></con:property><con:property><con:name>Activate</con:name><con:value>activate</con:value></con:property><con:property><con:name>VmsuserId_user</con:name><con:value>E3E44EC4E9252A8AE04400144F48797A</con:value></con:property><con:property><con:name>CustomerId</con:name><con:value>104</con:value></con:property><con:property><con:name>Msisdn</con:name><con:value>004915220440874</con:value></con:property><con:property><con:name>CorporateId</con:name><con:value>11</con:value></con:property><con:property><con:name>CorporateName</con:name><con:value>Wiklund Company</con:value></con:property><con:property><con:name>VmsuserId_admin</con:name><con:value>DA656663CED507AEE04400144F48797A</con:value></con:property></con:properties><con:afterLoadScript/><con:wssContainer/><con:databaseConnectionContainer/><con:reporting><con:reportTemplates/><con:xmlTemplates/><con:parameters/></con:reporting><con:sensitiveInformation/><con:environment name="Reports"><con:service type="REST" name="Reports"><con:endpoint domain="" incomingWss="" outgoingWss="" password="" username="" wssTimeToLive="" wssType="" proxyHost="" proxyPort="" proxyUsername="" proxyPassword="">http://${#Global#Servicehost}:${#Global#Serviceport} </con:endpoint></con:service><con:service type="REST" name="Reports/id"><con:endpoint domain="" incomingWss="" outgoingWss="" password="" username="" wssTimeToLive="" wssType="" proxyHost="" proxyPort="" proxyUsername="" proxyPassword="">http://${#Global#Servicehost}:${#Global#Serviceport} </con:endpoint></con:service><con:property><con:name>Host</con:name><con:value/></con:property><con:property><con:name>Port</con:name><con:value/></con:property><con:property><con:name>MinPINLen</con:name><con:value/></con:property><con:property><con:name>MinPUKLen</con:name><con:value/></con:property><con:property><con:name>PINRetryCnt</con:name><con:value/></con:property><con:property><con:name>PUKRetryCnt</con:name><con:value/></con:property><con:property><con:name>OTPDefaultLen</con:name><con:value/></con:property><con:property><con:name>Bans</con:name><con:value/></con:property><con:property><con:name>Search</con:name><con:value/></con:property><con:property><con:name>Start</con:name><con:value/></con:property><con:property><con:name>Limit</con:name><con:value/></con:property><con:property><con:name>Sort</con:name><con:value/></con:property><con:property><con:name>Direction</con:name><con:value/></con:property><con:property><con:name>Username</con:name><con:value/></con:property><con:property><con:name>Password</con:name><con:value/></con:property><con:property><con:name>Domain</con:name><con:value/></con:property><con:property><con:name>Type</con:name><con:value/></con:property><con:property><con:name>Disposition</con:name><con:value/></con:property><con:property><con:name>Replace</con:name><con:value/></con:property><con:property><con:name>Activate</con:name><con:value/></con:property><con:property><con:name>VmsuserId_user</con:name><con:value/></con:property><con:property><con:name>CustomerId</con:name><con:value/></con:property><con:property><con:name>Msisdn</con:name><con:value/></con:property><con:property><con:name>CorporateId</con:name><con:value/></con:property><con:property><con:name>CorporateName</con:name><con:value/></con:property><con:property><con:name>VmsuserId_admin</con:name><con:value/></con:property><con:databaseConnectionContainer/></con:environment></con:soapui-project>